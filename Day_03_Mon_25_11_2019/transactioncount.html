<body>
Get number of transactions in the latest block<br>
Compare to <a href="https://etherscan.io/blocks" target="_blank">Etherscan</a>
<pre id="log" style="width:100%;height:200px"></pre>
<script>
function log(logstr) {
    document.getElementById("log").innerHTML +=logstr+"\n";
}
const server="wss://mainnet.infura.io/ws";
log(`Opening connection to ${server}`);
var socket = new WebSocket(server);
socket.onopen = function (event) {
    const request=JSON.stringify({"id": 1, "method": "eth_getBlockTransactionCountByNumber", "params": ["latest"]});
    log(`Connection opened, sending: ${request}`);
    socket.send(request);
};
socket.onmessage = async function (event) {
    log(`Received ${event.data}`);
    var data=JSON.parse(event.data);
    log(`Transaction count of latest block = ${parseInt(data.result)}`);
}
socket.onerror = function(error) {
    log(`[error] ${error.message}`);
};
</script>
</body>
